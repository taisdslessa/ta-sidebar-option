<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Course: Caring for Your New Cat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet" />
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }

      .helper-text {
        font-size: 12px;
        color: #6b7280;
      }
      #dropdownToggle {
        color: #ffffff;
        margin-top: 16px;
        margin-bottom: 16px;
      }
      .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 40;
        display: none;
      }
      #drawerModal {
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
      }
      #drawerModal.open {
        transform: translateX(0);
      }
      img.progress-checkbox {
        width: 16px;
        float: left;
      }
      img.progress-checkbox-subitem {
        width: 12px;
        float: left;
      }
      summary {
        list-style: none;
      }
      summary::-webkit-details-marker {
        display: none;
      }
      #citationContent {
        display: none;
        margin-top: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .citation-link {
        color: #4f46e5;
        cursor: pointer;
        text-decoration: underline;
      }
      a {
      text-decoration: underline !important;
      color: #2A4ECC !important;
    }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen flex flex-col">
    <!-- Top Navigation -->
    <header class="bg-indigo-700 text-white px-4 py-3 flex items-center justify-between">
      <button class="text-sm font-medium hover:underline">&larr; Go to Dashboard</button>
      <h1 class="font-semibold">Course: A Comprehensive Guide to Caring for Your New Cat</h1>
      <div></div>
    </header>

    <div class="flex flex-1 overflow-hidden">
      <!-- Sidebar -->
    <aside class="w-80 bg-[#F6F8FB] border-r overflow-y-auto">
      <div class="p-3">
        <div class="shadow-[0_1px_2px_0_rgba(0,0,0,.35)] p-4 rounded-md bg-white">
        <h2 class="text-xl font-semibold leading-tight">A Comprehensive Guide to Caring for Your New Cat</h2>
        <!--progress bar-->
        <div class="rounded-lg mt-4">
          <svg width="100%" height="100%" viewBox="0 0 300 20" xmlns="http://www.w3.org/2000/svg">
            <!-- Background rectangle -->
            <rect x="0" y="0" width="300" height="4" fill="#e0e0e0" />
      
            <!-- Progress rectangle -->
            <rect
              x="0"
              y="0"
              width="0"
              height="20"
              fill="#76c7c0"
              id="progress-bar"
            />
          </svg>
        </div>
        <p class="text-sm text-gray-500 mt-0">0% complete</p>
        </div>
      </div>


      <!-- Ask AI -->
      <div class="p-4">
        <details class="w-full group" id="ai-section">
          <summary style="border: 1px solid rgba(40, 45, 55, 0.1)" class="cursor-pointer flex items-center justify-between bg-white text-[#12151A] px-4 py-5 rounded-md font-semibold";>
            <div class="flex items-center gap-[4px]"><img src="img/sparkle.svg"><span>Teaching Assistant</span> <img src="img/alpha-badge.svg" class="pl-1"></div>
           
            <svg class="w-4 h-4 ml-2 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
   <!-- Chatbot-->
   <div class="max-full bg-white rounded-tr-none rounded-tl-none rounded-br-md rounded-bl-md flex flex-col h-[60vh]" style="border: 1px solid rgba(40, 45, 55, 0.1);">


    <!-- Messages -->
    <main id="chat" class="flex-1 overflow-y-auto p-4 space-y-4" >
      <!-- Messages inserted here -->
       
      <!--initial placeholder-->
      <div id="messages" class="relative p-4">
        <!--Messages-->
        <div id="placeholder" class="text-gray-400 text-center text-sm">
          <div class="w-[200px]"><img src="img/intro-placeholder.jpg"></div>
          Hello! I'm your AI Teaching Assistant, here to support with course questions related to cat care by searching videos, PDFs, and text files. 
      </div>


    </main>

    <!-- Input -->
    <form id="chat-form" class="border-t px-3 pt-4 pb-0 flex flex-col gap-1">
      
      <div class="relative w-full">
        <input id="chat-input" type="text" placeholder="How can I help you today?"
          class="w-full text-sm pl-3 pr-10 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <button type="submit"
          class="absolute right-1 top-1/2 transform -translate-y-1/2 bg-[#2A4ECC] hover:bg-[#1336B2] text-white rounded-md flex items-center justify-center">
          <p class="text-sm pt-1 pb-1 pl-3 pr-3 font-semibold">Send</p>
        </button>
      </div>
    </form>

    <div class="text-xs p-4">
      <img src="img/info.svg" class="float-left w-5 mr-2">
      Important content may be inaccurate. Please check sources.
    </div>
    
  </div>


        </details>
      </div>

      <!--Search box-->
      <div class="pl-4 pr-4 pb-0 relative">
        <button class="w-full px-3 py-2 border rounded-md text-sm text-left bg-[#F6F8FB]">Search by lesson title</button>
      </div>



      <div class="px-4 pb-4">
        <!-- Course Outline -->
        <div>
          <details open class="mb-2 group">
            <summary class="font-semibold text-sm cursor-pointer py-2 flex justify-between items-center list-none">
              <span class="flex items-center gap-2">
                <img class="progress-checkbox" src="img/checkbox-blank-circle-svgrepo-com.png">
                Course Introduction <span class="text-gray-400">0/1</span>
              </span>
              <span class="text-gray-400 transition-transform duration-200 group-open:rotate-180">‚ñº</span>
            </summary>
            <ul class="pl-4 space-y-1 text-sm text-gray-700">
              <li class="flex items-center space-x-2">
                <img class="progress-checkbox-subitem mr-2" src="img/checkbox-blank-circle-svgrepo-com.png">
                <span>Intro Video</span>
              </li>
            </ul>
          </details>
        
          <details open class="mb-2 group">
            <summary class="font-semibold text-sm cursor-pointer py-2 flex justify-between items-center list-none">
              <span class="flex items-center gap-2">
                <img class="progress-checkbox" src="img/checkbox-blank-circle-svgrepo-com.png">
                Introduction to Cat Care<span class="text-gray-400">0/5</span>
              </span>
              <span class="text-gray-400 transition-transform duration-200 group-open:rotate-180">‚ñº</span>
            </summary>
            <ul class="pl-4 space-y-2 text-sm text-gray-700">
      
              <li class="flex items-center space-x-2"><span><img class="progress-checkbox-subitem mr-2" src="img/checkbox-blank-circle-svgrepo-com.png">Why Cats Make Great Companions</span></li>
              <li class="flex items-center space-x-2"><span><img class="progress-checkbox-subitem mr-2" src="img/checkbox-blank-circle-svgrepo-com.png">Understanding Feline Behavior</span></li>
              <li class="flex items-center space-x-2"><span><img class="progress-checkbox-subitem mr-2" src="img/checkbox-blank-circle-svgrepo-com.png">Choosing the Right Cat for You</span></li>
              <li class="flex items-center space-x-2"><span><img class="progress-checkbox-subitem mr-2" src="img/checkbox-blank-circle-svgrepo-com.png">Understanding Cat Breeds and Their Needs</span></li>
            </ul>
          </details>
        
          <details class="mb-2 group">
            <summary class="font-semibold text-sm cursor-pointer py-2 flex justify-between items-center list-none">
              <span class="flex items-center gap-2">
                <img class="progress-checkbox" src="img/checkbox-blank-circle-svgrepo-com.png">
                Preparing Your Home <span class="text-gray-400">0/6</span>
              </span>
              <span class="text-gray-400 transition-transform duration-200 group-open:rotate-180">‚ñº</span>
            </summary>
          </details>
        
          <details class="mb-2 group">
            <summary class="font-semibold text-sm cursor-pointer py-2 flex justify-between items-center list-none">
              <span class="flex items-center gap-2">
                <img class="progress-checkbox" src="img/checkbox-blank-circle-svgrepo-com.png">
                Feeding & Nutrition <span class="text-gray-400">0/3</span>
              </span>
              <span class="text-gray-400 transition-transform duration-200 group-open:rotate-180">‚ñº</span>
            </summary>
          </details>
        </div>
      </div>
      <div class="text-center text-xs text-gray-400 py-4 border-t">TEACH ONLINE WITH THINKIFIC</div>
    </aside>

      <!-- Main Content -->
      <main class="flex-1 p-6 overflow-y-auto">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold">Why Planning is Important</h2>
          <button class="text-sm text-white bg-gray-800 rounded px-3 py-1 hover:bg-gray-700">üí¨ 1 Discussion</button>
        </div>

        <div class="aspect-video bg-gray-200 relative overflow-hidden rounded-lg">
          <img src="img/cat-video-thumbnail-2.jpg" alt="Video Thumbnail" class="w-full h-full object-cover" />
          <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
            <svg class="w-16 h-16 text-white bg-gray-700 bg-opacity-50 rounded-full p-3 cursor-pointer" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-width="2" d="M8 5v14l11-7z" />
            </svg>
          </div>
          <div class="absolute bottom-2 left-2 text-white text-xs bg-black bg-opacity-60 px-2 py-0.5 rounded">2:40</div>
          <div class="absolute bottom-2 right-2 flex items-center space-x-2 text-white text-xs bg-black bg-opacity-60 px-2 py-0.5 rounded">
            <span>‚öôÔ∏è</span><span>üîä</span><span>‚õ∂</span>
          </div>
        </div>

        <!-- Empty div to serve as a placeholder for dynamic content -->
        <div id="citationContent" style="display: none;"></div>
      </main>
    </div>

    <!-- Overlay -->
    <div id="overlay" class="overlay"></div>

    <!-- Drawer Modal -->
    <div id="drawerModal" class="fixed top-0 left-0 h-screen w-full max-w-[680px] bg-[#F6F8FB] z-50 overflow-y-auto  p-4">
      <div class="relative">
        <button id="closeDrawer" class="absolute top-4 right-4 text-gray-500 hover:text-black text-xl font-bold">&times;</button>
  <!-- Start here -->

      
  
       <!-- Chatbot-->
       <div class="max-full bg-white rounded-xl flex flex-col h-[95vh]"style="border: 1px solid rgba(40, 45, 55, 0.1);">


        <!-- Header -->
        <header class="flex items-center gap-3 px-4 py-3 border-b">
          <img src="img/ta-icon-placeholder.png" alt="Bot Avatar" class="w-8 h-8 rounded-full">
          <h1 class="text-base font-semibold">Chat with the Teaching Assistant (AI)</h1>
        </header>
    
        <!-- Messages -->
        <main id="chat" class="flex-1 overflow-y-auto p-4 space-y-4">
          <!-- Messages inserted here -->
           
          <!--initial placeholder-->
          <div id="messages" class="relative p-4">
            <!--Messages-->
            <div id="placeholder" class="text-gray-400 text-center text-sm">
              <div class="w-[200px]"><img src="img/intro-placeholder.jpg"></div>
              Hello! I'm your AI Teaching Assistant, here to support course questions about cat care by searching videos, PDFs, and text files. 
            </div>
          </div>
  

        </main>
    
      
      </div>
      <!--end here-->
      </div>
      </div>
    </div>

    <script type="module">

      const searchResults = document.getElementById('searchResults');
      const searchInput = document.getElementById('searchInput');
      const citationContent = document.getElementById('citationContent');
      const chat = document.getElementById('chat');
      const form = document.getElementById('chat-form');
      const input = document.getElementById('chat-input');
      const botReplies = {
      'how often should i feed my kitten': 'Feed your kitten 3‚Äì4 times a day until they are 6 months old. <br> <div class="mt-2"><span class="font-semibold">See lesson:</span> <a href="https://www.example.com/feeding" target="_blank">Taking care of my kitten</a></div>',
      'what is the best litter for kittens': 'Non-clumping litter is safest for kittens under 3 months old. <br> <div class="mt-2"><span class="font-semibold">See lesson:</span> <a href="https://www.example.com/feeding" target="_blank">Cat care</a></div>',
      'how to train a kitten to use litter box': 'Place the kitten in the litter box after meals and naps; praise success!<br> <div class="mt-2"><span class="font-semibold">See lesson:</span> <a href="https://www.example.com/feeding" target="_blank">Tranining your cat</a></div>'
    };

    /*prevent page reload on send*/
    document.getElementById('chat-form').addEventListener('submit', function(e) {
  e.preventDefault(); // Prevent page reload
  const input = document.getElementById('accordion-chat-input');
  const message = input.value.trim();
  if (message) {
    // Do your custom message handling here
    console.log('User asked:', message);
    input.value = '';
  }
});
     
/* Time format change*/
function formatTime() {
    const now = new Date();
    const options = {
      hour: 'numeric',
      minute: 'numeric',
      hour12: true,
    };
    return now.toLocaleString(undefined, options);
  }

    function addMessage(from, text) {

      const placeholder = document.getElementById('messages');
      if (placeholder) {
      placeholder.style.display = 'none';
      }

  const container = document.createElement('div');
  container.className = 'fade-in items-start flex flex-col';

  if (from === 'user') {
    // Create a row for the user message
    const messageRow = document.createElement('div');
    messageRow.className = 'flex items-start gap-2 justify-start';

    // User avatar image
    const avatar = document.createElement('img');
    avatar.src = 'img/user-picture-placeholder.png'; // Change this to your user's avatar image path
    avatar.alt = 'User Avatar';
    avatar.className = 'w-[40px] h-[40px] rounded-md'; // 40px x 40px avatar size

    const content = document.createElement('div');
    content.className = 'flex flex-col';

    // Header row for user name and timestamp
    const header = document.createElement('div');
    header.className = 'flex items-center gap-2';

    const name = document.createElement('div');
    name.className = 'text-sm font-bold text-[#12151A]';
    name.textContent = 'Emily Davis'; // Static user name

    const time = document.createElement('div');
    time.className = 'text-xs text-gray-400 mt-1';
    time.textContent = formatTime();

    header.appendChild(name);
    header.appendChild(time);

    // User message bubble
    const bubble = document.createElement('div');
    bubble.className = 'text-[#12151A] px-0 py-1 rounded-t-xl rounded-bl-xl max-w-full text-sm';
    bubble.textContent = text;

    // Assemble user message: name/time above message bubble
    content.appendChild(header);
    content.appendChild(bubble);

    messageRow.appendChild(avatar);
    messageRow.appendChild(content);
    container.appendChild(messageRow);
  }

  else {
    // Create a row for the assistant/bot message
    const messageRow = document.createElement('div');
    messageRow.className = 'flex items-start gap-2';

    // Bot avatar image
    const avatar = document.createElement('img');
    avatar.src = 'img/ta-icon-placeholder.png';
    avatar.alt = 'Bot Avatar';
    avatar.className = 'w-[40px] h-[40px] rounded-md'; // 40px x 40px avatar size

    const content = document.createElement('div');
    content.className = 'flex flex-col';

    // Header row for bot name and timestamp
    const header = document.createElement('div');
    header.className = 'flex items-center gap-2';

    const name = document.createElement('div');
    name.className = 'text-sm font-bold text-[#12151A]';
    name.textContent = 'Teaching Assistant'; // Change to actual name if dynamic

    const time = document.createElement('div');
    time.className = 'text-xs text-gray-400 mt-[1px]';
    time.textContent = formatTime();

    header.appendChild(name);
    header.appendChild(time);

    // Bot message bubble
    const bubble = document.createElement('div');
    bubble.className = 'text-[#12151A] px-0 py-1 rounded-xl max-w-full text-sm';
    bubble.innerHTML = text;

    // Feedback thumbs icon
    const thumbs = document.createElement('img');
    thumbs.src = 'img/thumbs-up-down.png';
    thumbs.alt = 'Answer Rating';
    thumbs.className = 'w-10 cursor-pointer mt-1';

    // Assemble bot message: name/time > bubble > thumbs
    content.appendChild(header);
    content.appendChild(bubble);
    content.appendChild(thumbs);

    messageRow.appendChild(avatar);
    messageRow.appendChild(content);
    container.appendChild(messageRow);
  }

  // Append the new message and scroll to bottom
  chat.appendChild(container);
  chat.scrollTop = chat.scrollHeight;
}



    function botTypingIndicator() {
      const typing = document.createElement('div');
      typing.id = 'typing';
      typing.className = 'flex items-center space-x-2 text-sm text-gray-400 italic fade-in';

      const avatar = document.createElement('img');
      avatar.src = 'img/ta-icon-placeholder.png';
      avatar.alt = 'Bot Avatar';
      avatar.className = 'w-6 h-6 rounded-md';

      const dots = document.createElement('span');
      dots.className = 'typing-dots';
      dots.textContent = 'Teaching Assistant is typing';

      typing.appendChild(avatar);
      typing.appendChild(dots);
      chat.appendChild(typing);
      chat.scrollTop = chat.scrollHeight;
    }

    function removeTypingIndicator() {
      const typing = document.getElementById('typing');
      if (typing) typing.remove();
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const text = input.value.trim();
      if (!text) return;

      addMessage('user', text);
      input.value = '';

      botTypingIndicator();

      setTimeout(() => {
        removeTypingIndicator();
        const normalized = text.toLowerCase().trim().replace(/[?.!]+$/, '');
        const reply = botReplies[normalized] || "Unfortunately I couldn't find any answer for this topic. Please use the search feature to search for specific courses.";
        addMessage('bot', reply);
      }, 1500);
    });

    const messagesContainer = document.getElementById('messages');
  const placeholder = document.getElementById('placeholder');
  const userInput = document.getElementById('chat-input');

userInput.addEventListener('input', () => {
  if (userInput.value.trim() === '' && messagesContainer.children.length <= 1) {
    placeholder.style.display = 'block';
  } else {
    placeholder.style.display = 'none';
  }
});


    </script>
  </body>
</html>